# ============================================
# Environment Variables for AI Chatbot Backend
# ============================================
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in your actual credentials below
# 3. All variables marked as REQUIRED must be provided for the app to work
# 4. For testing, set RUN_LIVE_TESTS=1 and RUN_LIVE_MEMORY_TESTS=1

# ============================================
# PROJECT CONFIGURATION
# Required for: Application identification and Redis namespacing
# ============================================
PROJECT_NAME=chatbot-api
PROJECT_ID=production-chatbot
ENVIRONMENT=production

# ============================================
# AWS SERVICES CONFIGURATION
# Required for: S3 data storage, Bedrock AI
# ============================================
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here
AWS_DEFAULT_REGION=us-east-1
AWS_BEDROCK_MODEL_ID=anthropic.claude-3-haiku-20240307-v1:0

# ============================================
# S3 STORAGE SETTINGS
# Required for: Product data storage, Support document storage
# ============================================
S3_BUCKET_NAME=your-s3-bucket-name
S3_PRODUCTS_KEY=products.json
S3_SUPPORT_KNOWLEDGE_KEY=support_knowledge_base.json

# ============================================
# GOOGLE AI (GEMINI) CONFIGURATION
# Required for: Backup AI when AWS Bedrock unavailable
# ============================================
GOOGLE_API_KEY=your_google_api_key_here
GEMINI_MODEL=gemini-1.5-flash

# ============================================
# PINECONE VECTOR DATABASE
# Required for: AI-powered semantic search
# ============================================
PINECONE_API_KEY=your_pinecone_api_key_here
PINECONE_ENVIRONMENT=us-east-1
PINECONE_PRODUCTS_INDEX=chatbot-products
PINECONE_SUPPORT_INDEX=chatbot-support-knowledge

# ============================================
# REDIS MEMORY CACHE
# Required for: Conversation history, session management
# ============================================
# Option 1: Use REDIS_URL (recommended for cloud Redis)
# REDIS_URL=redis://username:password@host:port/db

# Option 2: Use individual Redis settings
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_DB=0
REDIS_USERNAME=default
REDIS_PASSWORD=your_redis_password

# ============================================
# HUGGING FACE API
# Required for: Text embeddings for vector search
# ============================================
HF_API_KEY=your_huggingface_api_key_here
HF_PRODUCT_MODEL=BAAI/bge-small-en-v1.5
HF_SUPPORT_MODEL=BAAI/bge-small-en-v1.5

# ============================================
# GITHUB WEBHOOK CONFIGURATION
# Required for: Auto-deployment from GitHub
# ============================================
GITHUB_WEBHOOK_SECRET=your_webhook_secret_here

# ============================================
# APPLICATION SETTINGS
# Optional: Application behavior configuration
# ============================================
LLM_MODEL=gpt-3.5-turbo
SEARCH_CASE_INSENSITIVE=true

# ============================================
# ADVANCED CONFIGURATION (Optional)
# ============================================

# -----------------------------------------------------------------------------
# Pinecone search feature flags
# -----------------------------------------------------------------------------
# After reindexing products to include boolean tag flags in metadata, enable
# server-side tag filtering to avoid post-query drops.
# Uncomment the line below once reindex is complete.
# SEARCH_TAGS_SERVER_FILTER_ENABLED=true

# -----------------------------------------------------------------------------
# CORS CONFIGURATION (driven by environment)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins for the FastAPI CORSMiddleware.
# Each origin must include scheme and port if applicable.
# Production (default):
# ALLOWED_ORIGINS=https://www.ravii.app,https://ravii.app
# Local development (temporary; remember to remove before production):
# ALLOWED_ORIGINS=https://www.ravii.app,https://ravii.app,http://localhost:5173,http://localhost:3000

# ============================================
# TESTING FLAGS (Optional)
# ============================================
# Enable live integration tests that use real cloud services. Keep disabled by default.
# RUN_LIVE_TESTS=1
# RUN_LIVE_MEMORY_TESTS=1

# Force the keyword-based fallback intent classification (bypasses LLMs).
# Useful for validating config-driven category synonyms in tests.
# Do NOT enable in production.
# FORCE_KEYWORD_FALLBACK=1
